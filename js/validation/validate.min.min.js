var $returnFun={};var validate=Class.extend({cfg:{},form:new Object(),validateObj:new Object(),init:function(c){this.cfg=c;this.form=$("#"+this.cfg.formID);var d={errorElement:"span",errorClass:"js-help-block",focusInvalid:false,ignore:".ignore",onsubmit:false,highlight:function(a){$(a).closest(".js-vdt-group").addClass("js-has-error")},success:function(a){a.closest(".js-vdt-group").removeClass("js-has-error");a.remove()},errorPlacement:function(b,a){a.closest(".js-vdt-group").append(b)}};if(this.cfg.rules){d.rules=this.cfg.rules}if(this.cfg.messages){d.messages=this.cfg.messages}if(this.cfg.onfocusout){d.onfocusout=function(a){var b=$(a).valid();if($returnFun[$(a).attr("id")]){$returnFun[$(a).attr("id")](a,b)}}}this.validateObj=this.form.validate(d)},validateForm:function(){return this.validateObj.form()},addRule:function(e,d,f){$.validator.addMethod(e,d,f)},addReturnFun:function(c,d){$returnFun[c]=d},addRule4Element:function(d,c){$("#"+d).rules("add",c)},removeRule4Element:function(d,c){$("#"+d).rules("remove",c)},resetForm:function(){$(".js-help-block").remove();$(".js-has-error").toggleClass("js-has-error")},resetElement:function(d){var c=$("#"+d).closest(".js-vdt-group");c.removeClass("js-has-error");c.find(".js-help-block").remove()}});$.validator.addMethod("isMobile",function(f,e){var d=f.length;return this.optional(e)||(d==11&&/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1})|(14[0-9]{1}))+\d{8})$/.test(f))},"请正确填写您的手机号码。");$.validator.addMethod("isPhone",function(f,d){var e=/^(\d{3,4}-?)?\d{7,9}$/g;return this.optional(d)||(e.test(f))},"请正确填写您的电话号码。");$.validator.addMethod("isTel",function(h,j){var i=h.length;var f=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1})|(14[0-9]{1}))+\d{8})$/;var g=/^(\d{3,4}-?)?\d{7,9}$/g;return this.optional(j)||g.test(h)||(i==11&&f.test(h))},"请正确填写您的联系方式");$.validator.addMethod("isDigits",function(c,d){return this.optional(d)||/^\d+$/.test(c)},"只能输入0-9数字");$.validator.addMethod("isAllowedShipNo",function(g,e){var h=g.length;var f=/^CN[1-9][0-9]{3}\d{7}$/;return this.optional(e)||(h==13&&f.test(g))},"请输入正确的船舶识别号。");$.validator.addMethod("isAllowedShipRegNo",function(g,f){var e=g.length;var h=/^[1-9][0-9]{3}[A-HJ-NP-Y](01|03|05|11|13|20|21|23|25|30|31|33|35|41|43|45|51|55|81|61|40|65|71|73|75|83|15)\d{5}$/;return this.optional(f)||(e==12&&h.test(g))},"请输入正确的船舶登记号。");$.validator.addMethod("isDigitsAndEnglish",function(c,d){return this.optional(d)||/^[A-Za-z0-9]+$/.test(c)},"只能包含数字和英文字符。");$.validator.addMethod("isFloat",function(c,d){return this.optional(d)||/^[+]?\d+(\.\d+)?$/.test(c)},"只能包含数字、小数点等字符");$.validator.addMethod("isIdCardNo",function(g,e){var h={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};function f(i){var c=0;var b="";if(!/^\d{17}(\d|x)$/i.test(i)){return false}i=i.replace(/x$/i,"a");if(h[parseInt(i.substr(0,2))]==null){return false}sBirthday=i.substr(6,4)+"-"+Number(i.substr(10,2))+"-"+Number(i.substr(12,2));var a=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=(a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate())){return false}for(var d=17;d>=0;d--){c+=(Math.pow(2,d)%11)*parseInt(i.charAt(17-d),11)}if(c%11!=1){return false}return h[parseInt(i.substr(0,2))]+","+sBirthday+","+(i.substr(16,1)%2?"男":"女")}return f(g)},"请输入正确的身份证号码。");$.validator.addMethod("isPwd",function(c,d){return this.optional(d)||/^[a-zA-Z0-9_]{6,18}$/.test(c)},"长度在6-18之间，只能包含字母、数字和下划线。");$.validator.addMethod("isSpacek",function(c,d){return this.optional(d)||/^[\u4E00-\u9FA5a-zA-Z0-9_]{6,18}$/.test(c)},"长度在6-18之间，只能包含中文、字母、数字和下划线。");$.validator.addMethod("isEnglish",function(c,d){return this.optional(d)||/^[A-Za-z]+$/.test(c)},"只能包含英文字符。");$.validator.addMethod("isChinese",function(c,d){return this.optional(d)||/^[\u4e00-\u9fa5]+$/.test(c)},"只能包含中文字符。");$.validator.addMethod("isRightfulString",function(c,d){return this.optional(d)||/^[A-Za-z0-9_-]+$/.test(c)},"只能包含字母、数字、下划线等字符");$.validator.addMethod("isMoney",function(c,d){return this.optional(d)||/(^[1-9]\d{0,9}(\.\d{1,2})?$)/.test(c)||/(^0\.([1-9]\d{0,1}|0[1-9])$)/.test(c)},"金额不符合要求");$.validator.addMethod("stringCheck",function(c,d){return this.optional(d)||/^[a-zA-Z0-9\u4e00-\u9fa5-_]+$/.test(c)},"只能包含中文、英文、数字、下划线等字符");$.validator.addMethod("noZero",function(c,d){return this.optional(d)||/^(?:[1-9]\d{0,8}(?:\.\d{1,8})?|0\.\d{1,8})$/.test(c)},"只能包含非零数字");$.validator.addMethod("checkDecimal1",function(f,d){var e=true;if(f.indexOf(".")>=0){f=f.substring(f.indexOf(".")+1);if(f.length>1){e=false}}return e},"小数位最多1位。");$.validator.addMethod("checkDecimal2",function(f,d){var e=true;if(f.indexOf(".")>=0){f=f.substring(f.indexOf(".")+1);if(f.length>2){e=false}}return e},"小数位最多2位。");$.validator.addMethod("checkDecN",function(i,j,h){var g=true;var f=h[0];if(i.indexOf(".")>=0){i=i.substring(i.indexOf(".")+1);if(i.length>f){g=false}}return g},"小数位数超限。");$.validator.addMethod("checkMaxNumber",function(m,p,r){var l=r[0];var k=1;for(var o=0;o<l;o++){k+="0"}k=Number(k);if(r.length>1){var n=r[1];var q=1;for(var o=0;o<n;o++){q*=0.1}k-=q}var i=true;if(m>k){i=false}return i},"数字超过上限。");$.validator.addMethod("checkLessZero",function(f,d){var e=false;f=f.replace(/^\s\s*/,"").replace(/\s\s*$/,"");!/\d+/.test(f)?e=true:f>0?e=true:null;return e},"必须大于零");$.validator.addMethod("isBusinessLicenseNum",function(c,d){return this.optional(d)||/^[a-zA-Z0-9]+$/.test(c)},"只能包含大写字母、数字等字符");