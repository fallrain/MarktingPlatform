var $returnFun={};var validate=Class.extend({cfg:{},form:new Object(),validateObj:new Object(),init:function(b){this.cfg=b;this.form=$("#"+this.cfg.formID);var a={errorElement:"span",errorClass:"js-help-block",focusInvalid:false,ignore:".ignore",onsubmit:false,highlight:function(c){$(c).closest(".js-vdt-group").addClass("js-has-error")},success:function(c){c.closest(".js-vdt-group").removeClass("js-has-error");c.remove()},errorPlacement:function(c,d){d.closest(".js-vdt-group").append(c)}};if(this.cfg.rules){a.rules=this.cfg.rules}if(this.cfg.messages){a.messages=this.cfg.messages}if(this.cfg.onfocusout){a.onfocusout=function(d){var c=$(d).valid();if($returnFun[$(d).attr("id")]){$returnFun[$(d).attr("id")](d,c)}}}this.validateObj=this.form.validate(a)},validateForm:function(){return this.validateObj.form()},addRule:function(a,b,c){$.validator.addMethod(a,b,c)},addReturnFun:function(b,a){$returnFun[b]=a},addRule4Element:function(a,b){$("#"+a).rules("add",b)},removeRule4Element:function(a,b){$("#"+a).rules("remove",b)},resetForm:function(){$(".js-help-block").remove();$(".js-has-error").toggleClass("js-has-error")},resetElement:function(a){var b=$("#"+a).closest(".js-vdt-group");b.removeClass("js-has-error");b.find(".js-help-block").remove()}});$.validator.addMethod("isMobile",function(c,a){var b=c.length;return this.optional(a)||(b==11&&/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1})|(14[0-9]{1}))+\d{8})$/.test(c))},"请正确填写您的手机号码。");$.validator.addMethod("isPhone",function(c,b){var a=/^(\d{3,4}-?)?\d{7,9}$/g;return this.optional(b)||(a.test(c))},"请正确填写您的电话号码。");$.validator.addMethod("isTel",function(e,c){var d=e.length;var b=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1})|(17[0-9]{1})|(14[0-9]{1}))+\d{8})$/;var a=/^(\d{3,4}-?)?\d{7,9}$/g;return this.optional(c)||a.test(e)||(d==11&&b.test(e))},"请正确填写您的联系方式");$.validator.addMethod("isDigits",function(b,a){return this.optional(a)||/^\d+$/.test(b)},"只能输入0-9数字");$.validator.addMethod("isAllowedShipNo",function(d,b){var c=d.length;var a=/^CN[1-9][0-9]{3}\d{7}$/;return this.optional(b)||(c==13&&a.test(d))},"请输入正确的船舶识别号。");$.validator.addMethod("isAllowedShipRegNo",function(d,a){var b=d.length;var c=/^[1-9][0-9]{3}[A-HJ-NP-Y](01|03|05|11|13|20|21|23|25|30|31|33|35|41|43|45|51|55|81|61|40|65|71|73|75|83|15)\d{5}$/;return this.optional(a)||(b==12&&c.test(d))},"请输入正确的船舶登记号。");$.validator.addMethod("isDigitsAndEnglish",function(b,a){return this.optional(a)||/^[A-Za-z0-9]+$/.test(b)},"只能包含数字和英文字符。");$.validator.addMethod("isFloat",function(b,a){return this.optional(a)||/^[+]?\d+(\.\d+)?$/.test(b)},"只能包含数字、小数点等字符");$.validator.addMethod("isIdCardNo",function(d,b){var c={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"};function a(e){var g=0;var h="";if(!/^\d{17}(\d|x)$/i.test(e)){return false}e=e.replace(/x$/i,"a");if(c[parseInt(e.substr(0,2))]==null){return false}sBirthday=e.substr(6,4)+"-"+Number(e.substr(10,2))+"-"+Number(e.substr(12,2));var j=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=(j.getFullYear()+"-"+(j.getMonth()+1)+"-"+j.getDate())){return false}for(var f=17;f>=0;f--){g+=(Math.pow(2,f)%11)*parseInt(e.charAt(17-f),11)}if(g%11!=1){return false}return c[parseInt(e.substr(0,2))]+","+sBirthday+","+(e.substr(16,1)%2?"男":"女")}return a(d)},"请输入正确的身份证号码。");$.validator.addMethod("isPwd",function(b,a){return this.optional(a)||/^[a-zA-Z0-9_]{6,18}$/.test(b)},"长度在6-18之间，只能包含字母、数字和下划线。");$.validator.addMethod("isSpacek",function(b,a){return this.optional(a)||/^[\u4E00-\u9FA5a-zA-Z0-9_]{6,18}$/.test(b)},"长度在6-18之间，只能包含中文、字母、数字和下划线。");$.validator.addMethod("isEnglish",function(b,a){return this.optional(a)||/^[A-Za-z]+$/.test(b)},"只能包含英文字符。");$.validator.addMethod("isChinese",function(b,a){return this.optional(a)||/^[\u4e00-\u9fa5]+$/.test(b)},"只能包含中文字符。");$.validator.addMethod("isRightfulString",function(b,a){return this.optional(a)||/^[A-Za-z0-9_-]+$/.test(b)},"只能包含字母、数字、下划线等字符");$.validator.addMethod("isMoney",function(b,a){return this.optional(a)||/(^[1-9]\d{0,9}(\.\d{1,2})?$)/.test(b)||/(^0\.([1-9]\d{0,1}|0[1-9])$)/.test(b)},"金额不符合要求");$.validator.addMethod("stringCheck",function(b,a){return this.optional(a)||/^[a-zA-Z0-9\u4e00-\u9fa5-_]+$/.test(b)},"只能包含中文、英文、数字、下划线等字符");$.validator.addMethod("noZero",function(b,a){return this.optional(a)||/^(?:[1-9]\d{0,8}(?:\.\d{1,8})?|0\.\d{1,8})$/.test(b)},"只能包含非零数字");$.validator.addMethod("checkDecimal1",function(c,b){var a=true;if(c.indexOf(".")>=0){c=c.substring(c.indexOf(".")+1);if(c.length>1){a=false}}return a},"小数位最多1位。");$.validator.addMethod("checkDecimal2",function(c,b){var a=true;if(c.indexOf(".")>=0){c=c.substring(c.indexOf(".")+1);if(c.length>2){a=false}}return a},"小数位最多2位。");$.validator.addMethod("checkDecN",function(d,c,e){var a=true;var b=e[0];if(d.indexOf(".")>=0){d=d.substring(d.indexOf(".")+1);if(d.length>b){a=false}}return a},"小数位数超限。");$.validator.addMethod("checkMaxNumber",function(f,c,a){var g=a[0];var h=1;for(var d=0;d<g;d++){h+="0"}h=Number(h);if(a.length>1){var e=a[1];var b=1;for(var d=0;d<e;d++){b*=0.1}h-=b}var j=true;if(f>h){j=false}return j},"数字超过上限。");$.validator.addMethod("checkLessZero",function(c,b){var a=false;c=c.replace(/^\s\s*/,"").replace(/\s\s*$/,"");!/\d+/.test(c)?a=true:c>0?a=true:null;return a},"必须大于零");$.validator.addMethod("isBusinessLicenseNum",function(b,a){return this.optional(a)||/^[a-zA-Z0-9]+$/.test(b)},"只能包含大写字母、数字等字符");